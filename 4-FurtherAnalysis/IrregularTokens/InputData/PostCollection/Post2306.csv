You,program,is,probably,failing,in,trying,to,load,the,entire,dataset,into,RAM,.,32,bits,per,float32,×,1,",",000,",",000,×,1000,is,3.7,GiB,.,That,can,be,a,problem,on,machines,with,only,4,GiB,RAM,.,To,check,that,it's,actually,the,problem,",",try,creating,an,array,of,this,size,alone,:,If,you,see,a,MemoryError,",",you,either,need,more,RAM,",",or,you,need,to,process,your,dataset,one,chunk,at,a,time,.,With,h5py,datasets,we,just,should,avoid,passing,the,entire,dataset,to,our,methods,",",and,pass,slices,of,the,dataset,instead,.,One,at,a,time,.,As,I,don't,have,your,data,",",let,me,start,from,creating,a,random,dataset,of,the,same,size,:,It,creates,a,nice,3.8,GiB,file,.,Now,",",if,we,are,in,Linux,",",we,can,limit,how,much,memory,is,available,to,our,program,:,Now,if,we,try,to,run,your,code,",",we'll,get,the,MemoryError,.,(,press,Ctrl-D,to,quit,the,new,bash,session,and,reset,the,limit,later,),Let's,try,to,solve,the,problem,.,We'll,create,an,IncrementalPCA,object,",",and,will,call,its,.,partial_fit(),method,many,times,",",providing,a,different,slice,of,the,dataset,each,time,.,It,seems,to,be,working,for,me,",",and,if,I,look,at,what,top,reports,",",the,memory,allocation,stays,below,200M,.
