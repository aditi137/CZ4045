Here
is
a
RegexDispatcher
class
that
dispatches
its
subclass
methods
by
regular
expression
.
Each
dispatchable
method
is
annotated
with
a
regular
expression
e.g
.
In
this
case
","
the
annotation
is
called
'
regex
'
and
its
value
is
the
regular
expression
to
match
on
","
'
\
+
'
","
which
is
the
+
sign
.
These
annotated
methods
are
put
in
subclasses
","
not
in
the
base
class
.
When
the
dispatch(...)
method
is
called
on
a
string
","
the
class
finds
the
method
with
an
annotation
regular
expression
that
matches
the
string
and
calls
it
.
Here
is
the
class
:
To
use
this
class
","
subclass
it
to
create
a
class
with
annotated
methods
.
By
way
of
example
","
here
is
a
simple
RPNCalculator
that
inherits
from
RegexDispatcher
.
The
methods
to
be
dispatched
are
(
of
course
)
the
ones
with
the
'
regex
'
annotation
.
The
parent
dispatch()
method
is
invoked
in
call
.
I
like
this
solution
because
there
are
no
separate
lookup
tables
.
The
regular
expression
to
match
on
is
embedded
in
the
method
to
be
called
as
an
annotation
.
For
me
","
this
is
as
it
should
be
.
It
would
be
nice
if
Python
allowed
more
flexible
annotations
","
because
I
would
rather
put
the
regex
annotation
on
the
method
itself
rather
than
embed
it
in
the
method
parameter
list
.
However
","
this
isn't
possible
at
the
moment
.
For
interest
","
take
a
look
at
the
Wolfram
language
in
which
functions
are
polymorphic
on
arbitrary
patterns
","
not
just
on
argument
types
.
A
function
that
is
polymorphic
on
a
regex
is
a
very
powerful
idea
","
but
we
can't
get
there
cleanly
in
Python
.
The
RegexDispatcher
class
is
the
best
I
could
do
.
