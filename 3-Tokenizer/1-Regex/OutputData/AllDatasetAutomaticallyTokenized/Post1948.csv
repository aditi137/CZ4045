So
","
it's
a
little
hacky
","
but
should
be
relatively
robust
.
There
are
two
main
negatives
here
:
Repeated
calls
to
fromstring
means
that
this
code
isn't
extremely
fast
.
About
the
same
speed
as
parsing
each
document
individually
","
much
slower
than
if
it
were
all
one
document
Errors
are
thrown
relative
to
the
current
location
in
the
document
.
It
would
be
easy
to
add
relative
location
support
(
just
adding
an
accumulator
to
keep
track
of
current
location
)
Basically
the
approach
is
to
find
the
thrown
errors
and
then
parse
just
the
section
of
the
file
above
the
error
.
If
an
error
that
isn't
related
to
the
last
of
a
root
node
is
thrown
then
it
is
handled
like
a
typical
exception
.
The
find_nth
code
is
shamelessly
stolen
from
this
question
.
It's
possible
that
there
aren't
many
situations
where
this
code
is
deeply
useful
","
but
for
me
with
a
large
number
of
slightly
irregular
documents
(
very
common
with
academic
data
)
it's
invaluable
.
