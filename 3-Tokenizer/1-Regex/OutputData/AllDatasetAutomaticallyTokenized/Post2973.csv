You
can't
pass
CPython-specific
PyXxx
structures
via
CFFI
:
you
need
to
pass
standard
C
data
.
Normally
I'd
answer
that
you
need
to
design
your
cdef()
'
ed
function
with
a
standard
C
interface
","
for
example
something
like
:
Then
you
need
to
manually
convert
the
myimage
to
a
numpy
array
","
somewhere
in
the
""""
...
""""
code
above
.
One
better
alternative
is
to
use
a
Python
callback
:
a
callback
that
makes
the
numpy
array
according
to
spec
and
returns
a
C-standard
float
*
pointer
.
The
numpy
array
itself
is
saved
somewhere
in
the
callback
.
You
could
save
it
as
a
Python
global
","
or
more
cleanly
use
a
""""
handle
""""
you
pass
via
C
.
Requires
the
API
version
","
not
the
ABI
.
In
_example_build.py
:
In
file
example.py
:
