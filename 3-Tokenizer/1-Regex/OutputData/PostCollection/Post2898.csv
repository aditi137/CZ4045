,0
0,Not
1,exactly
2,.
3,While
4,it
5,is
6,true
7,that
8,the
9,globals
10,are
11,shallow
12,copied
13,","
14,what
15,you
16,are
17,actually
18,seeing
19,is
20,the
21,scoping
22,of
23,globals
24,(using
25,the
26,keyword
27,global
28,)
29,and
30,how
31,it
32,actually
33,operates
34,at
35,the
36,module
37,level
38,in
39,Python
40,.
41,You
42,can
43,observe
44,this
45,by
46,putting
47,in
48,a
49,pdb
50,.set_trace()
51,inside
52,function
53,f
54,right
55,after
56,the
57,assignment
58,(X
59,=
60,2
61,).
62,Yes
63,","
64,the
65,value
66,is
67,indeed
68,2
69,within
70,the
71,scope
72,of
73,f
74,","
75,but
76,let
77,'s
78,take
79,a
80,look
81,of
82,its
83,globals
84,.
85,Let
86,'s
87,look
88,at
89,how
90,they
91,compare
92,in
93,the
94,current
95,frame
96,and
97,up
98,a
99,frame
100,.
101,Ah
102,ha
103,","
104,you
105,can
106,see
107,that
108,they
109,are
110,NOT
111,actually
112,the
113,same
114,thing
115,","
116,and
117,that
118,X
119,is
120,indeed
121,1
122,and
123,has
124,not
125,been
126,changed
127,","
128,because
129,the
130,globals
131,there
132,are
133,within
134,the
135,<doctest
136,doc
137,.f>
138,module
139,created
140,by
141,doctest
142,for
143,this
144,reason
145,.
146,Let
147,'s
148,continue
149,.
150,So
151,what
152,you
153,actually
154,saw
155,is
156,that
157,the
158,globals
159,within
160,the
161,doctest
162,is
163,not
164,the
165,same
166,one
167,as
168,the
169,one
170,on
171,your
172,source
173,(hence
174,g
175,will
176,return
177,2
178,because
179,X
180,was
181,really
182,was
183,changed
184,in
185,the
186,module
187,here
188,by
189,f
190,","
191,but
192,not
193,in
194,the
195,doctest
196,module
197,shallow
198,copy
199,scope
200,"),"
201,even
202,though
203,it
204,originally
205,was
206,copied
207,from
208,the
209,module
210,but
211,the
212,changes
213,are
214,not
215,reflected
216,back
217,to
218,the
219,underlying
220,module
221,since
222,this
223,is
224,how
225,the
226,global
227,keyword
228,operates
229,-
230,at
231,the
232,module
233,level
234,","
235,not
236,across
237,modules
238,.
