,0
0,I
1,am
2,currently
3,running
4,a
5,Flask
6,+
7,SQLAlchemy
8,+
9,uWSGI
10,+
11,nginx
12,stack
13,for
14,an
15,API
16,backend
17,that
18,I
19,am
20,developing
21,for
22,my
23,application
24,.
25,I
26,was
27,attempting
28,to
29,see
30,what
31,is
32,the
33,maximum
34,amount
35,of
36,concurrent
37,connection
38,I
39,can
40,have
41,on
42,my
43,server
44,by
45,using
46,ApacheBench
47,and
48,sending
49,different
50,amounts
51,of
52,concurrent
53,requests
54,to
55,an
56,endpoint
57,on
58,the
59,server
60,.
61,This
62,endpoint
63,would
64,take
65,a
66,JSON
67,request
68,body
69,","
70,extract
71,certain
72,values
73,","
74,run
75,a
76,query
77,","
78,then
79,return
80,a
81,JSON
82,response
83,based
84,on
85,the
86,results
87,of
88,the
89,query
90,.
91,I
92,ran
93,a
94,base
95,test
96,of
97,1
98,concurrent
99,request
100,for
101,10
102,requests
103,","
104,and
105,I
106,got
107,an
108,average
109,response
110,time
111,of
112,60
113,milliseconds
114,.
115,Running
116,another
117,test
118,with
119,10
120,concurrent
121,requests
122,for
123,100
124,requests
125,returned
126,an
127,average
128,of
129,150ms
130,","
131,100
132,concurrent
133,requests
134,for
135,1000
136,returned
137,1500ms
138,and
139,500
140,concurrent
141,requests
142,returned
143,around
144,7000
145,-9000ms.
146,The
147,latency
148,seems
149,to
150,be
151,linearly
152,increasing
153,which
154,makes
155,sense
156,","
157,but
158,it
159,seemed
160,to
161,increase
162,TOO
163,quickly
164,.
165,After
166,doing
167,a
168,lot
169,of
170,tinkering
171,and
172,profiling
173,","
174,I
175,found
176,that
177,the
178,bottleneck
179,was
180,the
181,queries
182,.
183,At
184,the
185,start
186,of
187,the
188,benchmark
189,","
190,the
191,queries
192,would
193,process
194,and
195,return
196,quickly
197,under
198,10
199,"-50ms,"
200,but
201,it
202,quickly
203,increased
204,and
205,in
206,some
207,cases
208,latencies
209,of
210,10000
211,-15000
212,ms
213,were
214,being
215,seen
216,.
217,I
218,couldn
219,'t
220,figure
221,out
222,why
223,the
224,db
225,was
226,slowing
227,down
228,so
229,much
230,especially
231,since
232,it
233,is
234,empty
235,(barring
236,test
237,data
238,).
239,I
240,tried
241,running
242,the
243,application
244,WITHOUT
245,a
246,connection
247,pool
248,","
249,and
250,the
251,results
252,showed
253,that
254,latency
255,went
256,down
257,(7-9s
258,to
259,5
260,-6s).
261,I
262,did
263,not
264,think
265,this
266,was
267,possible
268,because
269,everything
270,I
271,read
272,suggested
273,having
274,a
275,connection
276,pool
277,will
278,always
279,make
280,things
281,faster
282,because
283,you
284,avoid
285,the
286,overhead
287,of
288,establishing
289,a
290,new
291,connection
292,every
293,time
294,you
295,make
296,a
297,request
298,.
299,I
300,also
301,experimented
302,with
303,INCREASING
304,the
305,connection
306,pool
307,size
308,(from
309,the
310,default
311,5
312,to
313,50
314,"),"
315,and
316,that
317,decreased
318,latency
319,even
320,more
321,than
322,the
323,pool
324,-less
325,setup
326,(5-6s
327,to
328,3
329,-4s).
330,The
331,latency
332,is
333,still
334,extremely
335,high
336,(3-4
337,seconds
338,for
339,an
340,API
341,seems
342,unreasonable
343,by
344,any
345,standard
346,"),"
347,and
348,I
349,am
350,trying
351,to
352,figure
353,out
354,how
355,I
356,can
357,decrease
358,it
359,even
360,more
361,.
362,Is
363,the
364,answer
365,just
366,more
367,connections
368,?
369,Note
370,:
371,I
372,am
373,running
374,4
375,uWSGI
376,processes
377,with
378,100
379,threads
380,each
381,on
382,a
383,server
384,with
385,4GB
386,ram
387,and
388,a
389,quad
390,core
391,processor
392,.
393,I
394,am
395,using
396,the
397,psycopg2
398,-cffi
399,adapter
400,for
401,the
402,connection
403,","
404,and
405,the
406,application
407,is
408,running
409,on
410,PyPy
411,.
