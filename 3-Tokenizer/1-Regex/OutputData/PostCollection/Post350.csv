,0
0,I
1,think
2,you
3,'ll
4,find
5,XMLGenerator
6,from
7,xml
8,.sax.saxutils
9,is
10,the
11,closest
12,thing
13,to
14,what
15,you
16,want
17,.
18,import time
19,from
20,xml
21,.sax.saxutils
22,import XMLGenerator
23,from
24,xml
25,.sax.xmlreader
26,import AttributesNSImpl
27,LOG_LEVELS
28,=
29,"['DEBUG',"
30,"'WARNING',"
31,'ERROR']
32,class
33,"xml_logger:
    def __init__(self, output, encoding)"
34,:
35,""""""""
36,Set
37,up
38,a
39,logger
40,object
41,","
42,which
43,takes
44,SAX
45,events
46,and
47,outputs
48,an
49,XML
50,log
51,file
52,""""""""
53,logger = XMLGenerator
54,"(output,"
55,encoding
56,)
57,logger
58,.startDocument()
59,attrs = AttributesNSImpl
60,"({},"
61,{})
62,logger
63,".startElementNS((None,"
64,u
65,"'log'),"
66,u
67,"'log',"
68,attrs
69,)
70,self
71,._logger
72,=
73,logger
74,self
75,._output
76,=
77,output
78,self
79,._encoding
80,=
81,encoding
82,return
83,def
84,write_entry
85,"(self,"
86,level
87,","
88,msg
89,):
90,""""""""
91,Write
92,a
93,log
94,entry
95,to
96,the
97,logger
98,level
99,-
100,the
101,level
102,of
103,the
104,entry
105,msg
106,-
107,the
108,text
109,of
110,the
111,entry
112,.
113,Must
114,be
115,a
116,Unicode
117,object
118,""""""""
119,#Note:
120,in
121,a
122,real
123,application
124,","
125,I
126,would
127,use
128,ISO
129,8601
130,for
131,the
132,date
133,#asctime
134,used
135,here
136,for
137,simplicity
138,now = time
139,.asctime(time.localtime())
140,attr_vals
141,=
142,{
143,"(None,"
144,u
145,'date'):
146,now
147,","
148,"(None,"
149,u
150,'level'):
151,LOG_LEVELS
152,[level]
153,","
154,}
155,attr_qnames
156,=
157,{
158,"(None,"
159,u
160,'date'):
161,u
162,"'date',"
163,"(None,"
164,u
165,'level'):
166,u
167,"'level',"
168,}
169,attrs = AttributesNSImpl
170,"(attr_vals,"
171,attr_qnames
172,)
173,self
174,"._logger.startElementNS((None,"
175,u
176,"'entry'),"
177,u
178,"'entry',"
179,attrs
180,)
181,self
182,._logger.characters(msg)
183,self
184,"._logger.endElementNS((None,"
185,u
186,"'entry'),"
187,u
188,'entry')
189,return
190,def
191,close
192,(self):
193,""""""""
194,Clean
195,up
196,the
197,logger
198,object
199,""""""""
200,self
201,"._logger.endElementNS((None,"
202,u
203,"'log'),"
204,u
205,'log')
206,self
207,._logger.endDocument()
208,return
209,if
210,__name__
211,==
212,"""__main__"":"
213,#Test
214,it
215,out
216,import sys
217,xl = xml_logger
218,"(sys.stdout,"
219,'utf-8')
220,xl
221,".write_entry(2,"
222,u
223,"""Vanilla"
224,log
225,entry
226,""")"
227,xl
228,.close()
229,You
230,'ll
231,probably
232,want
233,to
234,look
235,at
236,the
237,rest
238,of
239,the
240,article
241,I
242,got
243,that
244,from
245,at
246,http
247,://www.xml.com/pub/a/2003/03/12/py-xml.html.
