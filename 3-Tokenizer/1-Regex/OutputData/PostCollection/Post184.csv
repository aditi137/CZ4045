,0
0,I
1,would
2,say
3,your
4,test
5,scheme
6,is
7,not
8,really
9,useful
10,.
11,To
12,fulfill
13,the
14,db
15,query
16,","
17,the
18,db
19,server
20,goes
21,through
22,several
23,"steps:
parse the SQL
work up a query plan, i. e. decide on which indices to use (if any)"
24,","
25,optimize
26,etc
27,.
28,if
29,an
30,index
31,is
32,used
33,","
34,search
35,it
36,for
37,the
38,pointers
39,to
40,the
41,actual
42,data
43,","
44,then
45,go
46,to
47,the
48,appropriate
49,location
50,in
51,the
52,data
53,or
54,if
55,no
56,index
57,is
58,used
59,","
60,scan
61,the
62,whole
63,table
64,to
65,determine
66,which
67,rows
68,are
69,needed
70,load
71,the
72,data
73,from
74,disk
75,into
76,a
77,temporary
78,location
79,"(hopefully,"
80,but
81,not
82,necessarily
83,","
84,memory
85,)
86,perform
87,the
88,count
89,()
90,and
91,avg
92,()
93,calculations
94,So
95,","
96,creating
97,an
98,array
99,in
100,Python
101,and
102,getting
103,the
104,average
105,basically
106,skips
107,all
108,these
109,steps
110,save
111,the
112,last
113,one
114,.
115,As
116,disk
117,I
118,/O
119,is
120,among
121,the
122,most
123,expensive
124,operations
125,a
126,program
127,has
128,to
129,perform
130,","
131,this
132,is
133,a
134,major
135,flaw
136,in
137,the
138,test
139,(see
140,also
141,the
142,answers
143,to
144,this
145,question
146,I
147,asked
148,here
149,before
150,).
151,Even
152,if
153,you
154,read
155,the
156,data
157,from
158,disk
159,in
160,your
161,other
162,test
163,","
164,the
165,process
166,is
167,completely
168,different
169,and
170,it
171,'s
172,hard
173,to
174,tell
175,how
176,relevant
177,the
178,results
179,are
180,.
181,To
182,obtain
183,more
184,information
185,about
186,where
187,Postgres
188,spends
189,its
190,time
191,","
192,I
193,would
194,suggest
195,the
196,following
197,"tests:
Compare the execution time of your query to a SELECT without the aggregating functions (i. e. cut step 5)"
198,If
199,you
200,find
201,that
202,the
203,aggregation
204,leads
205,to
206,a
207,significant
208,slowdown
209,","
210,try
211,if
212,Python
213,does
214,it
215,faster
216,","
217,obtaining
218,the
219,raw
220,data
221,through
222,the
223,plain
224,SELECT
225,from
226,the
227,comparison
228,.
229,To
230,speed
231,up
232,your
233,query
234,","
235,reduce
236,disk
237,access
238,first
239,.
240,I
241,doubt
242,very
243,much
244,that
245,it
246,'s
247,the
248,aggregation
249,that
250,takes
251,the
252,time
253,.
254,There
255,'s
256,several
257,ways
258,to
259,do
260,"that:
Cache data (in memory!)"
261,for
262,subsequent
263,access
264,","
265,either
266,via
267,the
268,db
269,engine
270,'s
271,own
272,capabilities
273,or
274,with
275,tools
276,like
277,memcached
278,Reduce
279,the
280,size
281,of
282,your
283,stored
284,data
285,Optimize
286,the
287,use
288,of
289,indices
290,.
291,Sometimes
292,this
293,can
294,mean
295,to
296,skip
297,index
298,use
299,altogether
300,(after
301,all
302,","
303,it
304,'s
305,disk
306,access
307,","
308,too
309,).
310,For
311,MySQL
312,","
313,I
314,seem
315,to
316,remember
317,that
318,it
319,'s
320,recommended
321,to
322,skip
323,indices
324,if
325,you
326,assume
327,that
328,the
329,query
330,fetches
331,more
332,than
333,10
334,%
335,of
336,all
337,the
338,data
339,in
340,the
341,table
342,.
343,If
344,your
345,query
346,makes
347,good
348,use
349,of
350,indices
351,","
352,I
353,know
354,that
355,for
356,MySQL
357,databases
358,it
359,helps
360,to
361,put
362,indices
363,and
364,data
365,on
366,separate
367,physical
368,disks
369,.
370,However
371,","
372,I
373,don
374,'t
375,know
376,whether
377,that
378,'s
379,applicable
380,for
381,Postgres
382,.
383,There
384,also
385,might
386,be
387,more
388,sophisticated
389,problems
390,such
391,as
392,swapping
393,rows
394,to
395,disk
396,if
397,for
398,some
399,reason
400,the
401,result
402,set
403,can
404,'t
405,be
406,completely
407,processed
408,in
409,memory
410,.
411,But
412,I
413,would
414,leave
415,that
416,kind
417,of
418,research
419,until
420,I
421,run
422,into
423,serious
424,performance
425,problems
426,that
427,I
428,can
429,'t
430,find
431,another
432,way
433,to
434,fix
435,","
436,as
437,it
438,requires
439,knowledge
440,about
441,a
442,lot
443,of
444,little
445,under
446,-the-hood
447,details
448,in
449,your
450,process
451,.
452,Update
453,:
454,I
455,just
456,realized
457,that
458,you
459,seem
460,to
461,have
462,no
463,use
464,for
465,indices
466,for
467,the
468,above
469,query
470,and
471,most
472,likely
473,aren
474,'t
475,using
476,any
477,","
478,too
479,","
480,so
481,my
482,advice
483,on
484,indices
485,probably
486,wasn
487,'t
488,helpful
489,.
490,Sorry
491,.
492,Still
493,","
494,I
495,'d
496,say
497,that
498,the
499,aggregation
500,is
501,not
502,the
503,problem
504,but
505,disk
506,access
507,is
508,.
509,I
510,'ll
511,leave
512,the
513,index
514,stuff
515,in
516,","
517,anyway
518,","
519,it
520,might
521,still
522,have
523,some
524,use
525,.
