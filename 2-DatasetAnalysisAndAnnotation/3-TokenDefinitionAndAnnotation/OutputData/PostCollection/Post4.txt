I want to capture a file that is downloaded when a certain url is passed in python. The problem is that the downloaded file is NOT returned by the server. The file gets downloaded when I pass the same url in a browser, but not when I do so via urllib2.urlopen(). Is there a way to capture this seemingly triggered side effect in python ? This is what I have so far.
#!/usr/bin/env python

import urllib
import urllib2
import re
import sys
import os

def main(sem_id):
    url = '<url>'
    for i in range(1,71):
        if i < 10:
            rollNo = '<roll_number>0%s'%i
        else:
            rollNo = '<roll_number>%s'%i

        values = { 'id':sem_id, 'regno':rollNo, 'sum':100, 'sessionok':'yes' }
        data = urllib.urlencode(values)
        url = url + '?' + data
        req = urllib2.Request(url)
        req.add_header('User-agent', 'Mozilla/5.0 (Linux i686)')

        response = urllib2.urlopen(req,timeout=100)

        result = response.read()


        with open('%s.pdf'%rollNo,'w') as f:
            f.write(result)


if __name__ == '__main__':
    assert len(sys.argv) == 2
    sem_id = sys.argv[1]
    main(sem_id)


